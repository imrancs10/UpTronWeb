@{
    Layout = null;
}
<!doctype html>
<html lang="en">
<head>
    <!-- SITE TITTLE -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>UPTRON POWERTRONICS LIMITED</title>

    <!-- PLUGINS CSS STYLE -->
    <link href="~/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="~/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet">

    <!-- CUSTOM CSS -->
    @*<link href="~/css/style.css" rel="stylesheet">*@
    <link href="~/css/default.css" rel="stylesheet" id="option_color">

    <!-- JAVASCRIPTS -->
    <!--   Core JS Files   -->
    <script src="~/assets/js/jquery-2.2.4.min.js" type="text/javascript"></script>
    <script src="~/assets/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="~/assets/js/jquery.bootstrap.js" type="text/javascript"></script>
    <!--  Plugin for the Wizard -->
    <script src="~/assets/js/material-bootstrap-wizard.js"></script>
    <script src="~/assets/js/jquery.validate.min.js"></script>

    <script src="~/Scripts/App/Global/App.js"></script>
    <script src="~/Scripts/App/Global/Utility.js"></script>
    <!-- CSS Files -->
    @*<link href="~/assets/css/bootstrap.min.css" rel="stylesheet" />*@
    <link href="~/assets/css/material-bootstrap-wizard.css" rel="stylesheet" />
    <!-- CSS Just for demo purpose, don't include it in your project -->
    <link href="~/assets/css/demo.css" rel="stylesheet" />
</head>
<body class="body-wrapper static">
    <div class="se-pre-con"></div>
    <div class="main-wrapper">

        <!-- PAGE TITLE SECTION -->
        <section class="clearfix pageTitleArea" style="background-image: url(../img/blog/pageTitle-bg-004.jpg);">
            <div class="container">
                <div class="pageTitle">
                    <h1>Vendor Upload</h1>
                </div>
            </div>
        </section>
        <!-- ABOUT SECTION -->
        <div class="example">
            <ol class="breadcrumb">
                <li><a href="~/Home/Index">Home</a></li>
                <li class="active">Vendor Document Upload</li>
            </ol>
        </div>
        <!--   Big container   -->
        <section class="clearfix" style="background-image: url(../assets/img/wizard-profile.jpg);margin-top: -20px;">

            <div class="image-container set-full-height">
                <div class="container">
                    <div class="timeLine">
                        <div class="row">
                            <div class="col-sm-7 col-sm-offset-3">
                                <div class="wizard-container">
                                    <div class="card wizard-card" data-color="green" id="wizardProfile">
                                        <form method="POST" action="VendorDocument" enctype="multipart/form-data">
                                            <div class="wizard-header">
                                                <h3 class="wizard-title">
                                                    Build Your Profile
                                                </h3>
                                                <h5>This information will let us know more about you.</h5>
                                            </div>
                                            <div class="wizard-navigation">
                                                <ul>
                                                    <li><a href="#Info" data-toggle="tab">Information</a></li>
                                                    <li><a href="#Otp" data-toggle="tab">One Time Password</a></li>
                                                    @{
                                                        if (Convert.ToBoolean(ViewData["DocumentUpload"]) == true)
                                                        {
                                                            <li class="active"><a href="#Upload" data-toggle="tab">Document Upload</a></li>
                                                        }
                                                        else
                                                        {
                                                            <li><a href="#Upload" data-toggle="tab">Document Upload</a></li>
                                                        }
                                                    }

                                                </ul>
                                            </div>
                                            <div class="tab-content">
                                                <div class="tab-pane" id="Info">
                                                    <div class="row">
                                                        <h5 style="text-align:center;"> Let's start with the basic information (with validation)</h5>
                                                        <div class="col-md-10 col-sm-offset-1">
                                                            <div class="input-group">
                                                                <span class="input-group-addon">
                                                                    <h5 style="margin-right: 25px;"><i class="fa fa-user"> Vendor Code</i></h5>
                                                                </span>
                                                                <div class="form-group label-floating is-empty">
                                                                    <label class="control-label">Vendor Code</label>
                                                                    <input id="VendorCode" type="text" class="form-control" placeholder="Vendor Code" autocomplete="off">
                                                                    <span class="material-input"></span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-10 col-sm-offset-1">
                                                            <div class="input-group">
                                                                <span class="input-group-addon">
                                                                    <h5 style="margin-right: 25px;"><i class="fa fa-mobile"> Mobile No</i></h5>
                                                                </span>
                                                                <div class="form-group label-floating">
                                                                    <label class="control-label">Mobile No </label>
                                                                    <input id="MobileNumber" type="text" class="form-control" placeholder="Mobile No" autocomplete="off">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-10 col-sm-offset-1">
                                                            <div class="input-group">
                                                                <span class="input-group-addon">
                                                                    <h5 style="margin-right: 25px;"><i class="fa fa-envelope"> Email Id</i></h5>
                                                                </span>
                                                                <div class="form-group label-floating is-empty">
                                                                    <label class="control-label">Email Id</label>
                                                                    <input id="EmailID" type="text" class="form-control" placeholder="Email Id" autocomplete="off">
                                                                    <span class="material-input"></span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="tab-pane" id="Otp">
                                                    <h4 class="info-text"> Check your Email for OTP... </h4>
                                                    <div class="row">
                                                        <div class="col-md-10 col-sm-offset-1">
                                                            <div class="input-group">
                                                                <span class="input-group-addon">
                                                                    <h5 style="margin-right: 25px;"><i class="fa fa-user"> One Time Password</i></h5>
                                                                </span>
                                                                <div class="form-group label-floating is-empty">
                                                                    <label class="control-label">One Time Password</label>
                                                                    <input id="OTPText" type="text" class="form-control" placeholder="One Time Password" autocomplete="off">
                                                                    <span class="material-input"></span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                @{
                                                    if (Convert.ToBoolean(ViewData["DocumentUpload"]) == true)
                                                    {
                                                        <div class="tab-pane active" id="Upload">
                                                            <div class="row">
                                                                <div class="col-sm-12">
                                                                    <h4 class="info-text"> Upload Document... </h4>
                                                                </div>
                                                                <div class="col-md-10 col-sm-offset-1">

                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <h5 style="margin-right: 25px;">
                                                                                <i class="fa fa-user">Upload File</i>
                                                                            </h5>
                                                                        </span>
                                                                        <div class="fileUpload">
                                                                            <input type="file" name="documentFile" id="documentFile" required>
                                                                        </div>
                                                                        <span style="color:red;">Size should be or equal to 400 KB.</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    }
                                                    else
                                                    {
                                                        <div class="tab-pane" id="Upload">
                                                            <div class="row">
                                                                <div class="col-sm-12">
                                                                    <h4 class="info-text"> Upload Document... </h4>
                                                                </div>
                                                                <div class="col-md-10 col-sm-offset-1">

                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <h5 style="margin-right: 25px;">
                                                                                <i class="fa fa-user">Upload File</i>
                                                                            </h5>
                                                                        </span>
                                                                        <div class="fileUpload">
                                                                            <input type="file" name="documentFile">
                                                                        </div>
                                                                        <span style="color:red;">Size should be or equal to 400 KB.</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    }
                                                }

                                            </div>
                                            <div class="wizard-footer">
                                                <div class="pull-right">
                                                    @{
                                                        if (Convert.ToBoolean(ViewData["DocumentUpload"]) == true)
                                                        {
                                                            <input type='button' class='btn btn-success hidden' name='next' value='Next' id="btnNext" />
                                                            <input type='submit' class='btn btn-success' name='finish' value='Finish' id="btnFinish" />
                                                        }
                                                        else
                                                        {
                                                            <input type='button' class='btn btn-success' name='next' value='Next' id="btnNext" />
                                                            <input type='submit' class='btn btn-success hidden' name='finish' value='Finish' id="btnFinish" />
                                                        }
                                                    }

                                                </div>
                                                <div class="pull-left">
                                                    <input type='button' class='btn btn-default hidden' name='previous' value='Previous' id="btnPrevious" />
                                                </div>
                                                <div class="clearfix"></div>
                                            </div>
                                        </form>
                                    </div>
                                </div> <!-- wizard container -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </section>
    </div>
    @if (TempData["Alert_Title"] != null)
    {
        <div id="dialog" title="@TempData["Alert_Title"].ToString()">
            @if (TempData["Alert_Message"] != null)
            {
                <p>@TempData["Alert_Message"].ToString()</p>
            }
            else
            {
                <p>Success..!</p>
            }
        </div>
    }
    <div id="alertModel" style="display:none;" title="">
        <p></p>
    </div>

    <script type="text/javascript">
        $(document).ready(function () {
            $("#dialog").dialog({
                resizable: false,
                height: "auto",
                width: 400,
                modal: true,
                buttons: {
                    "OK": function () {
                        $(this).dialog("close");
                    }
                }
            });
            //$('#Upload').hide();
        })

    </script>
    <link href="~/css/jquery-ui.css" rel="stylesheet" />
    <script src="~/js/jquery-ui.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var liList = $('.nav-pills li');
            var tabIndex = -1;
            $.each(liList, function (Index, Item) {
                if ($(Item).hasClass('active')) {
                    tabIndex = Index;
                    return false;
                }
            });
            //TabIndex=0 -> Information Tab
            if (tabIndex == 0) {
                $('#VendorCode').prop('required', true);
                $('#MobileNumber').prop('required', true);
                $('#EmailID').prop('required', true);
            }
        });

        $('#btnNext').click(function () {
            var liList = $('.nav-pills li');
            var tabIndex = -1;
            $.each(liList, function (Index, Item) {
                if ($(Item).hasClass('active')) {
                    tabIndex = Index;
                    return false;
                }
            });

            //TabIndex=0 -> Information Tab
            if (tabIndex == 0) {
                var vendorJson = {
                    VenderCode: $('#VendorCode').val(),
                    MobileNumber: $('#MobileNumber').val(),
                    EmailID: $('#EmailID').val()
                };
                $.ajax({
                    dataType: 'json',
                    type: 'POST',
                    url: '/Home/CheckVendorDetail',
                    data: JSON.stringify(vendorJson),
                    contentType: "application/json; charset=utf-8",
                    success: function (data) {
                        if (data == "OTP Sent") {
                            $('#wizardProfile').bootstrapWizard('next');
                            $('#OTPText').prop('required', true);
                            $('#VendorCode').prop('required', false);
                            $('#MobileNumber').prop('required', false);
                            $('#EmailID').prop('required', false);
                        }
                        else {
                            utility.alert.setAlert("Wrong Detail", "Your Detail are not matched.");
                        }
                    },
                    failure: function (response) {
                        alert(response);
                    },
                    error: function (response) {
                        alert(response.responseText);
                    }
                });
            }
            //TabIndex=1 -> OTP Tab
            else if (tabIndex == 1) {
                var vendorJson = {
                    OTPText: $("#OTPText").val()
                };
                $.ajax({
                    dataType: 'json',
                    type: 'POST',
                    url: '/Home/CheckVendorOTP',
                    data: JSON.stringify(vendorJson),
                    contentType: "application/json; charset=utf-8",
                    success: function (data) {
                        if (data == "OTP Mached") {
                            $('#wizardProfile').bootstrapWizard('next');
                            $('#btnFinish').removeClass('hidden');
                            $('#btnNext').addClass('hidden');

                            $('#OTPText').prop('required', false);
                            $('#VendorCode').prop('required', false);
                            $('#MobileNumber').prop('required', false);
                            $('#EmailID').prop('required', false);

                            $('#documentFile').prop('required', true);
                        }
                        else {
                            utility.alert.setAlert("Wrong Detail", "OTP are not matched.");
                        }
                    },
                    failure: function (response) {
                        alert(response);
                    },
                    error: function (response) {
                        alert(response.responseText);
                    }
                });
            }

            //TabIndex=2 -> Document Upload Tab

        });
        $('#btnPrevious').click(function () {
            //$('#wizardProfile').bootstrapWizard('previous');
        });
    </script>
</body>
</html>
